<!DOCTYPE html>
<html>
  <head>
    <title>Tile Package Estimator</title>
    <link rel='SHORTCUT ICON' href='/favicon.ico'>

    <!-- Viewport mobile tag for sensible mobile support -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="//js.arcgis.com/3.10/js/esri/css/esri.css">   
    <link rel="stylesheet" type="text/css" href="//esri.github.io/bootstrap-map-js/src/css/bootstrapmap.css">

    <link rel="stylesheet" type="text/css" href="res/app.css">

    <link rel="stylesheet" type="text/css" href="res/ladda-themeless.min.css">

    <style>
      #extentMap {
        height: 400px;
      }

      .hidden-on-start {
        display: none;
      }

      #tileCountDisplay {
        margin-left: 10px;
      }

      #zoomLevels {
        margin-left: 5px;
      }

      #zoomLevels > .btn.active {
        background-color: orange;
      }

      #zoomLevels > .btn.active:disabled {
        background-color: rgb(173, 129, 48);
      }

      #tpkSizeDisplay {
        margin-left: 10px);
      }

      #tpkSizeDisplay.invalid {
        text-decoration: line-through;
      }

      #zoomLevels > .btn.current-zoom {
        border-color: red;
        border-width: 2px;
        margin-top: -1px;
      }

      .panel-body {
        padding-top: 0px;
      }

      .form-group:last-of-type {
        margin-bottom: 0px;
      }

      .form-group.pull-right .btn {
        margin-right: 10px;
      }

      #downloadTPK span {
        margin-left: 5px;
      }
    </style>
  </head>
  <body>

    <div class="container-fluid main">
      
      <div class="row">

        <!-- Set extent and estimate size -->
        <div class="col-sm-12" style="padding:0px">
          <div class="panel panel-primary" style="margin-bottom: 0px" id="lastPanel">

            <div class="panel-heading text-center">Tile Package Estimator
              <button type="button" class="btn btn-info btn-xs pull-right hidden-on-start" onClick="doOAuth()" id="esriSignIn">authorize tile estimator</button>

              <div class="btn-group pull-right hidden-on-start" id="esriSignOut">
                <button class="btn btn-info btn-xs"><span id="esriUsername"></span></button>
                <button class="btn btn-info btn-xs dropdown-toggle" type="button" data-toggle="dropdown"><span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                  <li><a href="#" onClick="signOut()">Sign out</a></li>
                </ul>
              </div>

              <div class="dropdown pull-left">
                <button class="btn btn-info btn-xs dropdown-toggle" type="button" id="basemapPicker" data-toggle="dropdown">
                  <span id="currentBasemap"></span>
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu" aria-labelledby="basemapPicker" id="basemapDropdown">
                </ul>
              </div>
            </div>

            <div class="panel-body">
              <form id="extentForm" class="form-horizontal" method="post"
                data-bv-message="This value is not valid"
                data-bv-live="disabled"
                >

                <div class="form-group">
                  <div id="extentMap" class="result-map"></div>
                </div>

                <div class="form-group">
                  <div class="col-sm-12">
                    Levels: 
                    <div class="btn-group" data-toggle="buttons-checkbox" id="zoomLevels"
                      data-tile-count="0">
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="0">0</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="1">1</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="2">2</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="3">3</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="4">4</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="5">5</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="6">6</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="7">7</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="8">8</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="9">9</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="10">10</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="11">11</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="12">12</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="13">13</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="14">14</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="15">15</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="16">16</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="17">17</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip"
                            data-tile-count="0" data-zoom-level="18">18</button>
                        <button type="button" class="btn btn-xs btn-primary" 
                            data-toggle="tooltip" data-container="body"
                            data-tile-count="0" data-zoom-level="19">19</button>
                    </div>
                  </div>
                </div>

                <div class="form-group pull-right">
                    <button type="button" class="btn btn-primary ladda-button" disabled="true" id="estimateButton" onClick="estimateTPK()"
                    data-style="zoom-out"><span class="ladda-label">Estimate Size</span></button>
                    <button type="button" class="btn btn-primary ladda-button" disabled="true" id="tpkButton" onClick="getTPK()"
                    data-style="zoom-out"><span class="ladda-label">Get TPK</span></button>
                </div>

              </form>
            </div>

            <div class="panel-footer text-center">
              <span id="tileCountDisplay"></span>
              <span id="tpkSizeDisplay"></span>
              <a id="downloadTPK" class="btn btn-xs btn-success hidden-on-start pull-right"
                data-toggle="tooltip" data-placement="top" title="Download TPK"
                href="http://tiledbasemaps.arcgis.com/arcgis/rest/directories/arcgisoutput/World_Topo_Map_MapServer/_agsLMapCacheL8112/Layers.tpk">
                Download TPK<span class="glyphicon glyphicon-download-alt"></span>
              </a>
            </div>

          </div>
        </div>

      </div>

    </div>

    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

    <script type="text/javascript" src="res/jquery.cookie.js"></script>

    <script src="res/spin.min.js"></script>
    <script src="res/ladda.min.js"></script>

    <script type="text/javascript" src="res/amd.prep.js"></script>
    <script type="text/javascript" src="//js.arcgis.com/3.10compact"></script>

    <script type="text/javascript" src="res/authenticate.js"></script>
    <script type="text/javascript" src="res/login.js"></script>
    <script type="text/javascript" src="res/map.js"></script>
    <script type="text/javascript" src="res/tiles.js"></script>
    <script type="text/javascript" src="res/tpk.js"></script>
    <script type="text/javascript" src="res/ui.js"></script>
    <script type="text/javascript" src="res/app.js"></script>
  </body>
</html>